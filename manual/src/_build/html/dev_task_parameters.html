<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. jsCoFE Task Development: Input Parameters &#8212; jsCoFE v0.1.0</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="jsCoFE v0.1.0" href="index.html" />
    <link rel="next" title="4. jsCoFE Task Development: Run Applications" href="dev_run_application.html" />
    <link rel="prev" title="2. jsCoFE Task Development: Input Data" href="dev_task_input.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">jsCoFE v0.1.0</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="dev_task_input.html" title="2. jsCoFE Task Development: Input Data"
             accesskey="P">previous</a> |
          <a href="dev_run_application.html" title="4. jsCoFE Task Development: Run Applications"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="jscofe-task-development-input-parameters">
<h1>3. jsCoFE Task Development: Input Parameters<a class="headerlink" href="#jscofe-task-development-input-parameters" title="Permalink to this headline">¶</a></h1>
<p>jsCoFE can pass several types of parameters from <em>Job Dialog</em> to <em>Task Driver</em>:</p>
<ul class="simple">
<li>Strings</li>
<li>Integer numbers</li>
<li>Real numbers</li>
<li>Checkbox states</li>
<li>Selector (multiple choices) states</li>
</ul>
<p>The general mechanism for passing parameters is the same as for input data.
Firstly, parameters need to be described (together with layout and visibility
instructions) in <em>Task Class</em>, after which they will be accessible for
<em>Task Driver</em> via a dedicated data structure.</p>
<div class="section" id="specifying-input-parameters-in-task-class">
<span id="input-parameters"></span><h2>3.1. Specifying input parameters in Task Class<a class="headerlink" href="#specifying-input-parameters-in-task-class" title="Permalink to this headline">¶</a></h2>
<p>All input parameters must be described in a hierarchical JSON object assigned
to class&#8217;s variable <code class="docutils literal"><span class="pre">parameters</span></code> in <a class="reference internal" href="dev_hello_world.html#task-class"><span class="std std-ref">Task Class constructor</span></a>,
for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">this</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="o">//</span> <span class="n">container</span> <span class="k">for</span> <span class="nb">all</span> <span class="nb">input</span> <span class="n">parameters</span>
  <span class="n">NCLUST</span> <span class="p">:</span>          <span class="o">//</span> <span class="n">unique</span> <span class="n">key</span> <span class="k">for</span> <span class="n">fetching</span> <span class="n">parameter</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">Task</span> <span class="n">Driver</span>
       <span class="p">{</span>  <span class="nb">type</span>      <span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>  <span class="o">//</span> <span class="n">parameter</span> <span class="nb">type</span>
          <span class="n">label</span>     <span class="p">:</span> <span class="s1">&#39;Number of clusters&#39;</span><span class="p">,</span>  <span class="o">//</span> <span class="n">label</span> <span class="n">to</span> <span class="n">display</span> <span class="ow">in</span> <span class="n">Job</span> <span class="n">Dialog</span>
          <span class="n">tooltip</span>   <span class="p">:</span> <span class="s1">&#39;Specify the number of clusters between 1 and 50&#39;</span><span class="p">,</span>
          <span class="nb">range</span>     <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>   <span class="o">//</span> <span class="k">for</span> <span class="n">auto</span><span class="o">-</span><span class="n">validation</span> <span class="n">by</span> <span class="n">the</span> <span class="n">framework</span>
          <span class="n">value</span>     <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
          <span class="n">default</span>   <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
          <span class="n">position</span>  <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>All items in the above construct should be self-explicable, apart from, possibly,
the last one. <code class="docutils literal"><span class="pre">position</span></code> is a mandatory parameter, specifying where in the
page the corresponding widget should be placed. The page should be viewed as
an infinite table, in which columns and rows are numbered starting from 0.
Then, the position is given with the list of 4 numbers as <code class="docutils literal"><span class="pre">[row,col,rowSpan,colSpan]</span></code>
identically to positioning in standard HTML tables.</p>
<p>For clarity of presentation, parameters need to be grouped such as &#8220;Main options&#8221;,
&#8220;Advanced options&#8221;, &#8220;Expert options&#8221;, &#8220;Developer&#8217;s options&#8221; and similar. This
can be done with foldable Sections, each of which is a container for own
parameters, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">this</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="o">//</span> <span class="n">container</span> <span class="k">for</span> <span class="nb">all</span> <span class="nb">input</span> <span class="n">parameters</span>

  <span class="n">sec1</span>  <span class="p">:</span>  <span class="o">//</span> <span class="n">unique</span> <span class="n">Section</span> <span class="n">ID</span> <span class="n">used</span> <span class="k">for</span> <span class="n">fetching</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="n">Task</span> <span class="n">Driver</span>
      <span class="p">{</span> <span class="nb">type</span>     <span class="p">:</span> <span class="s1">&#39;section&#39;</span><span class="p">,</span>      <span class="o">//</span> <span class="n">widget</span> <span class="nb">type</span>
        <span class="n">title</span>    <span class="p">:</span> <span class="s1">&#39;Main options&#39;</span><span class="p">,</span> <span class="o">//</span> <span class="n">Section</span> <span class="n">title</span>
        <span class="nb">open</span>     <span class="p">:</span> <span class="n">true</span><span class="p">,</span>       <span class="o">//</span> <span class="n">true</span> <span class="k">for</span> <span class="n">the</span> <span class="n">section</span> <span class="n">to</span> <span class="n">be</span> <span class="n">initially</span> <span class="nb">open</span>
        <span class="n">position</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>  <span class="o">//</span> <span class="n">must</span> <span class="n">span</span> <span class="mi">5</span> <span class="n">columns</span>
        <span class="n">contains</span> <span class="p">:</span> <span class="p">{</span>           <span class="o">//</span> <span class="n">container</span> <span class="k">for</span> <span class="n">Section</span><span class="s1">&#39;s parameters</span>

          <span class="n">NCLUST</span> <span class="p">:</span>  <span class="o">//</span> <span class="n">unique</span> <span class="n">key</span> <span class="k">for</span> <span class="n">fetching</span> <span class="n">parameter</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">Task</span> <span class="n">Driver</span>
               <span class="p">{</span>  <span class="nb">type</span>      <span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>  <span class="o">//</span> <span class="n">parameter</span> <span class="nb">type</span>
                  <span class="n">label</span>     <span class="p">:</span> <span class="s1">&#39;Number of clusters&#39;</span><span class="p">,</span>
                  <span class="n">tooltip</span>   <span class="p">:</span> <span class="s1">&#39;Specify the number of clusters between 1 and 50&#39;</span><span class="p">,</span>
                  <span class="nb">range</span>     <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>   <span class="o">//</span> <span class="k">for</span> <span class="n">auto</span><span class="o">-</span><span class="n">validation</span> <span class="n">by</span> <span class="n">the</span> <span class="n">framework</span>
                  <span class="n">value</span>     <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
                  <span class="n">default</span>   <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
                  <span class="n">position</span>  <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="n">numbering</span> <span class="n">starts</span> <span class="kn">from</span> <span class="mi">0</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">sections</span>
                <span class="p">}</span>

        <span class="p">}</span>
      <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="inter-dependent-data-and-parameters">
<span id="inter-dependency"></span><h2>3.2. Inter-dependent Data and Parameters<a class="headerlink" href="#inter-dependent-data-and-parameters" title="Permalink to this headline">¶</a></h2>
<p>Quite often, task design requires hiding or showing certain parameters depending
on current values of other parameters or input data chosen. This is achieved
with <code class="docutils literal"><span class="pre">showon</span></code> or <code class="docutils literal"><span class="pre">hideon</span></code> terms in parameter descriptors. Consider the
following set of parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">this</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span> <span class="o">//</span> <span class="n">container</span> <span class="k">for</span> <span class="nb">all</span> <span class="nb">input</span> <span class="n">parameters</span>

  <span class="n">sec1</span>  <span class="p">:</span>  <span class="o">//</span> <span class="n">unique</span> <span class="n">Section</span> <span class="n">ID</span> <span class="n">used</span> <span class="k">for</span> <span class="n">fetching</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="n">Task</span> <span class="n">Driver</span>
      <span class="p">{</span> <span class="nb">type</span>     <span class="p">:</span> <span class="s1">&#39;section&#39;</span><span class="p">,</span>      <span class="o">//</span> <span class="n">widget</span> <span class="nb">type</span>
        <span class="n">title</span>    <span class="p">:</span> <span class="s1">&#39;Main options&#39;</span><span class="p">,</span> <span class="o">//</span> <span class="n">Section</span> <span class="n">title</span>
        <span class="nb">open</span>     <span class="p">:</span> <span class="n">true</span><span class="p">,</span>       <span class="o">//</span> <span class="n">true</span> <span class="k">for</span> <span class="n">the</span> <span class="n">section</span> <span class="n">to</span> <span class="n">be</span> <span class="n">initially</span> <span class="nb">open</span>
        <span class="n">position</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>  <span class="o">//</span> <span class="n">must</span> <span class="n">span</span> <span class="mi">5</span> <span class="n">columns</span>
        <span class="n">contains</span> <span class="p">:</span> <span class="p">{</span>           <span class="o">//</span> <span class="n">container</span> <span class="k">for</span> <span class="n">Section</span><span class="s1">&#39;s parameters</span>

          <span class="n">NCLUST</span> <span class="p">:</span>  <span class="o">//</span> <span class="n">unique</span> <span class="n">key</span> <span class="k">for</span> <span class="n">fetching</span> <span class="n">parameter</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">Task</span> <span class="n">Driver</span>
               <span class="p">{</span>  <span class="nb">type</span>      <span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>  <span class="o">//</span> <span class="n">parameter</span> <span class="nb">type</span>
                  <span class="n">label</span>     <span class="p">:</span> <span class="s1">&#39;Number of clusters&#39;</span><span class="p">,</span>
                  <span class="n">tooltip</span>   <span class="p">:</span> <span class="s1">&#39;Specify the number of clusters between 1 and 50&#39;</span><span class="p">,</span>
                  <span class="nb">range</span>     <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>   <span class="o">//</span> <span class="k">for</span> <span class="n">auto</span><span class="o">-</span><span class="n">validation</span> <span class="n">by</span> <span class="n">the</span> <span class="n">framework</span>
                  <span class="n">value</span>     <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
                  <span class="n">default</span>   <span class="p">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
                  <span class="n">position</span>  <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="o">//</span> <span class="n">numbering</span> <span class="n">starts</span> <span class="kn">from</span> <span class="mi">0</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">sections</span>
                  <span class="n">hideon</span>    <span class="p">:</span> <span class="p">{</span><span class="n">xyz</span><span class="p">:[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]}</span>
                <span class="p">},</span>

          <span class="n">HATOM</span> <span class="p">:</span>
               <span class="p">{</span>
                  <span class="nb">type</span>      <span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
                  <span class="n">label</span>     <span class="p">:</span> <span class="s1">&#39;Atom type&#39;</span><span class="p">,</span>
                  <span class="n">tooltip</span>   <span class="p">:</span> <span class="s1">&#39;Substructure atom giving anomalous scattering&#39;</span><span class="p">,</span>
                  <span class="n">value</span>     <span class="p">:</span> <span class="s1">&#39;Se&#39;</span><span class="p">,</span>
                  <span class="n">maxlength</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>       <span class="o">//</span> <span class="n">maximum</span> <span class="nb">input</span> <span class="n">length</span>
                  <span class="n">emitting</span>  <span class="p">:</span> <span class="n">true</span><span class="p">,</span>    <span class="o">//</span> <span class="n">allow</span> <span class="n">to</span> <span class="n">emit</span> <span class="n">signals</span> <span class="n">on</span> <span class="n">change</span>
                  <span class="n">position</span>  <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">},</span>

          <span class="n">PROGRAM</span> <span class="p">:</span>
                <span class="p">{</span>
                  <span class="nb">type</span>     <span class="p">:</span> <span class="s1">&#39;combobox&#39;</span><span class="p">,</span>
                  <span class="n">label</span>    <span class="p">:</span> <span class="s1">&#39;Substructure determination program&#39;</span><span class="p">,</span>
                  <span class="n">tooltip</span>  <span class="p">:</span> <span class="s1">&#39;The program that will be used for &#39;</span> <span class="o">+</span>
                             <span class="s1">&#39;substructure determination&#39;</span><span class="p">,</span>
                  <span class="nb">range</span>    <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;_blank_|Auto&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;pgm_shelxd|ShelXD&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;pgm_prasa|Prasa&#39;</span>
                             <span class="p">],</span>
                  <span class="n">value</span>    <span class="p">:</span> <span class="s1">&#39;_blank_&#39;</span><span class="p">,</span>
                  <span class="n">position</span> <span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">},</span>

          <span class="n">HANDDET_DO</span> <span class="p">:</span>
                <span class="p">{</span>
                  <span class="nb">type</span>     <span class="p">:</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">,</span>
                  <span class="n">label</span>    <span class="p">:</span> <span class="s1">&#39;Perform hand determination&#39;</span><span class="p">,</span>
                  <span class="n">tooltip</span>  <span class="p">:</span> <span class="s1">&#39;Unselect if you wish to skip the hand &#39;</span> <span class="o">+</span>
                             <span class="s1">&#39;determination and directly proceed with the &#39;</span> <span class="o">+</span>
                             <span class="s1">&#39;current hand&#39;</span><span class="p">,</span>
                  <span class="n">value</span>    <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
                  <span class="n">position</span> <span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
                  <span class="n">showon</span>   <span class="p">:</span> <span class="p">{</span><span class="n">HATOM</span><span class="p">:[</span><span class="s1">&#39;Se&#39;</span><span class="p">,</span><span class="s1">&#39;Hg&#39;</span><span class="p">]},</span>
                  <span class="n">hideon</span>   <span class="p">:</span> <span class="p">{</span><span class="n">PROGRAM</span><span class="p">:[</span><span class="s1">&#39;pgm_prasa&#39;</span><span class="p">]}</span>
                <span class="p">}</span>

        <span class="p">}</span>
      <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In this example, parameter <code class="docutils literal"><span class="pre">NCLUST</span></code> will be hidden if widget with identifier
<code class="docutils literal"><span class="pre">xyz</span></code> has a value of either <code class="docutils literal"><span class="pre">-1</span></code> or <code class="docutils literal"><span class="pre">0</span></code>. In our task, <em>Hello World!</em>,
<code class="docutils literal"><span class="pre">xyz</span></code> corresponds to the widget for choosing input data (coordinate files).
In this case, the <em>value</em> of the widget is the number of chosen datasets; <code class="docutils literal"><span class="pre">-1</span></code>
corresponds to the situation when datasets are not present in the project and
input data widget is not shown at all; <code class="docutils literal"><span class="pre">0</span></code> means that the widget shows
<code class="docutils literal"><span class="pre">[do</span> <span class="pre">not</span> <span class="pre">use]</span></code> message. A value of <code class="docutils literal"><span class="pre">N&gt;0</span></code> would mean that the widget shows
<code class="docutils literal"><span class="pre">N</span></code> datasets chosen. Therefore, <code class="docutils literal"><span class="pre">NCLUST</span></code> will be hidden if either there is
no coordinate datasets in the project, or no dataset is chosen for input.</p>
<p>The checkbox <code class="docutils literal"><span class="pre">HANDDET_DO</span></code> will be shown if widget <code class="docutils literal"><span class="pre">HATOM</span></code> contains string
<cite>Se</cite> or <cite>Hg</cite>, and hidden if combobox <code class="docutils literal"><span class="pre">PROGRAM</span></code> shows <code class="docutils literal"><span class="pre">Prasa</span></code>.</p>
<p>Full description of input widgets and inter-dependencies with complex logical
expressions is given in <a class="reference internal" href="ref_parameters.html"><span class="doc">Reference: Description of Input Parameters</span></a>.</p>
<p>Download the full source code of the modified <em>Hello World!</em> Task Class, which
includes the above description of input parameters from
<a class="reference download internal" href="_downloads/common.tasks.helloworld2.js" download=""><code class="xref download docutils literal"><span class="pre">here</span></code></a>, substitute it in
jsCoFE source code, restart servers and browser and check functionality of
input widgets and interdependencies.</p>
</div>
<div class="section" id="getting-input-parameters-in-task-driver">
<h2>3.3. Getting input parameters in Task Driver<a class="headerlink" href="#getting-input-parameters-in-task-driver" title="Permalink to this headline">¶</a></h2>
<p>Input parameters arrive in the <em>Task Driver</em> in structure <code class="docutils literal"><span class="pre">self.task.parameters</span></code>,
which is fully equivalent to JSON object <code class="docutils literal"><span class="pre">this.parameters</span></code> in the corresponding
<em>Task Class</em>. For example, the value of <code class="docutils literal"><span class="pre">NCLUST</span></code> parameter from the previous
Section will be accessible as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">sec1</span><span class="o">.</span><span class="n">contains</span><span class="o">.</span><span class="n">NCLUST</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p><em>Task Driver</em> may check whether a parameter was hidden due to inter-dependency
(<em>cf.</em> <a class="reference internal" href="#inter-dependency"><span class="std std-ref">above</span></a>) by reading the <code class="docutils literal"><span class="pre">visible</span></code> field of
the parameter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">sec1</span><span class="o">.</span><span class="n">contains</span><span class="o">.</span><span class="n">NCLUST</span><span class="o">.</span><span class="n">visible</span><span class="p">:</span>
    <span class="nb">print</span> <span class="s2">&quot;Parameter &#39;NCLUST&#39; is hidden, do not read or use its value&quot;</span>
</pre></div>
</div>
<p>Now let&#8217;s modify our <em>Hello World!&#8217;s</em> <em>Task Driver</em> from <a class="reference internal" href="dev_task_input.html"><span class="doc">jsCoFE Task Development: Input Data</span></a>
such that it prints values of all input parameters, as well as some other
properties. The corresponding <em>Task Driver&#8217;s</em> code may look like the following:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">##!/usr/bin/python</span>

<span class="c1">#  system imports</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#  ccp4-python imports</span>
<span class="kn">import</span> <span class="nn">pyrvapi</span>

<span class="c1">#  jsCoFE imports</span>
<span class="kn">from</span> <span class="nn">pycofe.tasks</span>  <span class="kn">import</span> <span class="n">basic</span>

<span class="c1"># ============================================================================</span>
<span class="c1"># HelloWorld driver</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">basic</span><span class="o">.</span><span class="n">TaskDriver</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># put message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">putMessage</span> <span class="p">(</span> <span class="s2">&quot;Hello World!&quot;</span> <span class="p">)</span>

        <span class="c1"># print in standard output and standard error streams</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_stdout</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="s2">&quot;Hello World!</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file_stderr</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span> <span class="s2">&quot;Hello World!</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>

        <span class="c1"># process input data</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="s2">&quot;xyz&quot;</span><span class="p">):</span> <span class="c1"># check if any data was chosen</span>

            <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">xyz</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">putMessage</span> <span class="p">(</span> <span class="s2">&quot;&lt;p&gt;&lt;b&gt;Total &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">))</span> <span class="o">+</span>\
                              <span class="s2">&quot; data objects chosen by user.&lt;/b&gt;&quot;</span> <span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">putMessage</span> <span class="p">(</span> <span class="s2">&quot;&lt;i&gt;Process dataset #&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&quot;</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_stdout</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=========  Data Object (metadata) #&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
                    <span class="n">xyz</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">to_JSON</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
                <span class="n">xyzi</span>     <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">makeClass</span> <span class="p">(</span> <span class="n">xyz</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">xyzi</span><span class="o">.</span><span class="n">getFilePath</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputDir</span><span class="p">()</span> <span class="p">)</span>
                <span class="n">filei</span>    <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span> <span class="n">filepath</span><span class="p">,</span><span class="s1">&#39;r&#39;</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">file_stdout</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=========  Data Content (file &quot;</span> <span class="o">+</span> <span class="n">xyzi</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span>\
                    <span class="s2">&quot;) #&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">filei</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
                <span class="n">filei</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">putMessage</span> <span class="p">(</span> <span class="s2">&quot;&lt;p&gt;&lt;b&gt;No input data was chosen by user.&lt;/b&gt;&quot;</span> <span class="p">)</span>

        <span class="c1"># process input parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">putMessage</span> <span class="p">(</span> <span class="s2">&quot;&amp;nbsp;&quot;</span> <span class="p">)</span>  <span class="c1"># spaceholder</span>

        <span class="n">sec1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">sec1</span><span class="o">.</span><span class="n">contains</span>

        <span class="c1"># make table</span>
        <span class="n">tableId</span> <span class="o">=</span> <span class="s2">&quot;report_table1&quot;</span>  <span class="c1"># make sure all PyRVAPI Ids are unique</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_add_table</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;&lt;font size=&#39;+1&#39;&gt;Summary of Parameters&lt;/font&gt;&quot;</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">report_page_id</span><span class="p">(),</span><span class="bp">self</span><span class="o">.</span><span class="n">rvrow</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_set_table_style</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;table-blue&quot;</span><span class="p">,</span><span class="s2">&quot;text-align:left;&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rvrow</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># important or table will be lost!</span>

        <span class="c1"># make table headers</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_horz_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span><span class="s2">&quot;Parameter type&quot;</span><span class="p">,</span><span class="mi">0</span> <span class="p">)</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_horz_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;Python type&quot;</span><span class="p">,</span><span class="s2">&quot;Python type&quot;</span><span class="p">,</span><span class="mi">1</span> <span class="p">)</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_horz_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;Label&quot;</span><span class="p">,</span><span class="s2">&quot;Parameter label&quot;</span><span class="p">,</span><span class="mi">2</span> <span class="p">)</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_horz_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;Visibility&quot;</span><span class="p">,</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span><span class="mi">3</span> <span class="p">)</span>
        <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_horz_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="s2">&quot;Value&quot;</span><span class="p">,</span><span class="s2">&quot;Parameter value&quot;</span><span class="p">,</span><span class="mi">4</span> <span class="p">)</span>

        <span class="c1"># fill rows with parameter data and metadata</span>
        <span class="k">def</span> <span class="nf">makeRow</span> <span class="p">(</span> <span class="n">name</span><span class="p">,</span><span class="n">parameter</span><span class="p">,</span><span class="n">row</span> <span class="p">):</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_vert_theader</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">parameter</span><span class="o">.</span><span class="n">tooltip</span><span class="p">,</span><span class="n">row</span> <span class="p">)</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_table_string</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="n">parameter</span><span class="o">.</span><span class="n">type</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="mi">0</span> <span class="p">)</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_table_string</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="nb">type</span><span class="p">(</span><span class="n">parameter</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="mi">1</span> <span class="p">)</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_table_string</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="n">parameter</span><span class="o">.</span><span class="n">label</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="mi">2</span> <span class="p">)</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_table_string</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">parameter</span><span class="o">.</span><span class="n">visible</span><span class="p">),</span><span class="n">row</span><span class="p">,</span><span class="mi">3</span> <span class="p">)</span>
            <span class="n">pyrvapi</span><span class="o">.</span><span class="n">rvapi_put_table_string</span> <span class="p">(</span> <span class="n">tableId</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">parameter</span><span class="o">.</span><span class="n">value</span><span class="p">),</span><span class="n">row</span><span class="p">,</span><span class="mi">4</span> <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">makeRow</span> <span class="p">(</span> <span class="s2">&quot;NCLUST&quot;</span>    <span class="p">,</span><span class="n">sec1</span><span class="o">.</span><span class="n">NCLUST</span>    <span class="p">,</span><span class="mi">0</span> <span class="p">)</span>
        <span class="n">makeRow</span> <span class="p">(</span> <span class="s2">&quot;HATOM&quot;</span>     <span class="p">,</span><span class="n">sec1</span><span class="o">.</span><span class="n">HATOM</span>     <span class="p">,</span><span class="mi">1</span> <span class="p">)</span>
        <span class="n">makeRow</span> <span class="p">(</span> <span class="s2">&quot;PROGRAM&quot;</span>   <span class="p">,</span><span class="n">sec1</span><span class="o">.</span><span class="n">PROGRAM</span>   <span class="p">,</span><span class="mi">2</span> <span class="p">)</span>
        <span class="n">makeRow</span> <span class="p">(</span> <span class="s2">&quot;HANDDET_DO&quot;</span><span class="p">,</span><span class="n">sec1</span><span class="o">.</span><span class="n">HANDDET_DO</span><span class="p">,</span><span class="mi">3</span> <span class="p">)</span>

        <span class="c1"># close execution logs and quit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">success</span><span class="p">()</span>
        <span class="k">return</span>

<span class="c1"># ============================================================================</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">drv</span> <span class="o">=</span> <span class="n">HelloWorld</span> <span class="p">(</span> <span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">drv</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="_downloads/helloworld2.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span></code></a> this file and copy it in
<code class="docutils literal"><span class="pre">pycofe/tasks</span></code> directories of all jsCoFE number crunchers, then create new
<em>Hello World!</em> task in a project with imported coordinate data. Run the task and
investigate connection between parameters displayed in the <em>Input</em> tab of the
<em>Job Dialog</em>, and their properties, presented in the <em>Output</em> tab.
Note that this example is useful for learning actual parameters metadata,
while the present documentation may be outdated or incomplete. Also note making
tables with <em>PyRVAPI</em> library.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="desktop.html">1. Quick start: jsCoFE Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">2. General jsCoFE Setup</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dev_hello_world.html">1. jsCoFE Task Development: Hello World!</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_task_input.html">2. jsCoFE Task Development: Input Data</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. jsCoFE Task Development: Input Parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#specifying-input-parameters-in-task-class">3.1. Specifying input parameters in Task Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inter-dependent-data-and-parameters">3.2. Inter-dependent Data and Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-input-parameters-in-task-driver">3.3. Getting input parameters in Task Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_run_application.html">4. jsCoFE Task Development: Run Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ref_input_data.html">1. Reference: Input Data Descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref_parameters.html">2. Reference: Description of Input Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref_pyrvapi.html">3. Reference: PyRVAPI Interface</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="dev_task_input.html" title="2. jsCoFE Task Development: Input Data"
              >previous</a> |
            <a href="dev_run_application.html" title="4. jsCoFE Task Development: Run Applications"
              >next</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/dev_task_parameters.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E. Krissinel and A. Lebedev.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>